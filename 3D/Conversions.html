<html>
<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}
</style>
<head>
</head>
<body>

<p>
  <table>
    <tr> 
      <td>Volume A: </td><td> <input id="VolumeA" tabindex="1"> </td>
    </tr>

    <tr>
      <td>Volume B:  </td><td> <input id="VolumeB" tabindex="2"></td>
    </tr>
    
    <tr>
      <td>Ratio:  </td><td> <input id="RatioA" tabindex="3" size=30><input id="RatioB" tabindex="4" size=30></td>
    </tr>
  </table>
</p>

<button type="button" onclick="CalculateA()">Give me volume A!</button>
<button type="button" onclick="CalculateB()">Give me volume B!</button>

<script>
  function OnLoad() {
      document.getElementById("RatioA").value = 1;
      document.getElementById("RatioB").value = 1;
  }
  window.onload = OnLoad;

  // See this documentation about why "correction factors" works here: https://stackoverflow.com/a/18908122
  function Convert(ratio, number, correctionFactor = 1.0)
  {
    return ratio * correctionFactor * number * correctionFactor / Math.pow(correctionFactor, 2);
  }

  function CalculateA() {
    let InVolumeB = document.getElementById("VolumeB").value;
    let InRatioA = document.getElementById("RatioA").value;
    let InRatioB = document.getElementById("RatioB").value;
          
    let InVolumeB  = InVolumeB   ? InVolumeB   : 0;
    let InRatioA  = InRatioA   ? InRatioA   : 0;
    let InRatioB  = InRatioB   ? InRatioB   : 0;

    if (InRatioA <= 0)
    {
      InRatioA = 1;
      document.getElementById("RatioA").value = InRatioA;
    }
    if (InRatioB <= 0)
    {
      InRatioB = 1;
      document.getElementById("RatioB").value = InRatioB;
    }
    
    let InRatio = InRatioB / InRatioA;
    
    let OutVolumeA  = Convert(InRatio, InVolumeB, 1000);

    document.getElementById("VolumeA").value = OutVolumeA  ;
  }

  function ToTalifarTime() {
    let e_secs  = parseFloat(document.getElementById("eseconds").value);
    let e_mins  = parseFloat(document.getElementById("eminutes").value);
    let e_hours = parseFloat(document.getElementById("ehours").value);
    let e_days  = parseFloat(document.getElementById("edays").value);
    let e_years = parseFloat(document.getElementById("eyears").value);

    e_secs  = e_secs   ? e_secs   : 0;
    e_mins  = e_mins   ? e_mins   : 0;
    e_hours = e_hours  ? e_hours  : 0;
    e_days  = e_days   ? e_days   : 0;
    e_years = e_years  ? e_years  : 0;

    let t_secs  = Convert(TSecondsPerESecond, e_secs, 1000);
    let t_mins  = Convert(TMinutesPerEMinute, e_mins, 100);
    let t_hours = Convert(THoursPerEHour, e_hours, 10);
    let t_days  = Convert(TDaysPerEDay, e_days);
    let t_years = Convert(TYearsPerEYear, e_years);

    document.getElementById("tseconds").value = t_secs  ;
    document.getElementById("tminutes").value = t_mins  ;
    document.getElementById("thours").value   = t_hours ;
    document.getElementById("tdays").value    = t_days  ;
    document.getElementById("tyears").value   = t_years ;

    let leap_year_days = parseInt(e_years / 4);
    let total_earth_ms = 
      (e_secs   * 1000 ) + 
      (e_mins   * 1000 * 60) + 
      (e_hours  * 1000 * 60 * 60) + 
      ((e_days + leap_year_days) * 1000 * 60 * 60 * 24) + 
      (e_years  * 1000 * 60 * 60 * 24 * 365);
      
    let normalized_e_seconds  = parseInt((total_earth_ms / ( 1000 * 1                       ))) % 60;
    let normalized_e_minutes  = parseInt((total_earth_ms / ( 1000 * 60                      ))) % 60;
    let normalized_e_hours    = parseInt((total_earth_ms / ( 1000 * 60 * 60                 ))) % 24;
    let normalized_e_days     = parseInt((total_earth_ms / ( 1000 * 60 * 60 * 24            ))) % 365;
    let normalized_e_years    = parseInt((total_earth_ms / ( 1000 * 60 * 60 * 24 * 365      )));

    document.getElementById("EarthTime").innerHTML = "Earth Time: " 
      + normalized_e_years + " years " 
      + normalized_e_days + " days " 
      + normalized_e_hours + " hours " 
      + normalized_e_minutes + " minutes " 
      + normalized_e_seconds + " seconds ";

    let total_talifar_ms = 
      (t_secs   * 1000)  + 
      (t_mins   * 1000 * 100) + 
      (t_hours  * 1000 * 100 * 100) + 
      (t_days   * 1000 * 100 * 100 * 20) + 
      (t_years  * 1000 * 100 * 100 * 20 * 360);

    let normalized_t_seconds  = parseInt((total_talifar_ms / ( 1000 * 1                         ))) % 100;
    let normalized_t_minutes  = parseInt((total_talifar_ms / ( 1000 * 100                       ))) % 100;
    let normalized_t_hours    = parseInt((total_talifar_ms / ( 1000 * 100 * 100                 ))) % 20;
    let normalized_t_days     = parseInt((total_talifar_ms / ( 1000 * 100 * 100 * 20            ))) % 360;
    let normalized_t_years    = parseInt((total_talifar_ms / ( 1000 * 100 * 100 * 20 * 360      )));

    document.getElementById("TalifarTime").innerHTML = "Talifar Time: "
      + normalized_t_years + " years " 
      + normalized_t_days + " days " 
      + normalized_t_hours + " hours " 
      + normalized_t_minutes + " minutes " 
      + normalized_t_seconds + " seconds ";
  }
</script>

  <br><br>
v 1.0.0.0

</body>
</html>
